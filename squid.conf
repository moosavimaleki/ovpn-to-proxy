http_port 3128

# شبکه‌های مجاز (داکر/لوکال)
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localhost src 127.0.0.1/32

# پورت‌های امن
acl SSL_ports port 443 8443
acl Safe_ports port 80 443 8443 1024-65535
acl CONNECT method CONNECT

# اول پورت‌های ناامن رو ببند
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports

# اجازه بده فقط از شبکه‌های مجاز
http_access allow localhost
http_access allow localnet

# بقیه همه deny
http_access deny all

# لاگ
access_log stdio:/var/log/squid/access.log
cache_log /var/log/squid/cache.log

# Privacy حداقلی
forwarded_for off
request_header_access X-Forwarded-For deny all
